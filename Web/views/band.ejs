<!DOCTYPE <!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">
	<link rel="icon" href="images/favicon.ico" type="image/x-icon">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.4/css/mdb.min.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:700" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/style.css" />

	<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
	<script src="/javascripts/config.js"></script>

	<title>BandsHere - <%= band.bandInfo.name %></title>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
		<a class="navbar-brand" href="#">
			<img src="images/logo.png" width="30" height="30" class="d-inline-block align-top" alt="">
			<span class="primary-highlight">BandsHere</span>
		</a>
		<ul class="navbar-nav ml-auto">
			<% if(authenticated) { %>
				<li class="nav-item">
					<a class="nav-link btn btn-primary btn-empty" href="#"><i class="fas fa-heart"></i>&nbsp;Following</a>
				</li>
				<li class="nav-item">
					<a class="nav-link btn btn-primary btn-empty" id="signout">Sign Out</a>
				</li>
			<% } else { %>
				<li class="nav-item">
					<a class="nav-link btn btn-primary btn-empty" data-toggle="modal" data-target="#registerModal"><i class="fas fa-heart"></i>&nbsp;Sign Up</a>
				</li>
			<% } %>
		</ul>
	</nav>

	<div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalTitle" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="registerModalTitle">Sign Up!</h5>
				</div>
				<div class="modal-body">
					<form class="p5">
						<div class="row justify-content-center">
							<div class="col-8">
								<p>Sign up to save your favorite bands.<br/><br/>If you're band, create your own page to make it easier than ever for fans to discover you.</p>
								<label for="registerEmail">Email</label>
								<input type="email" id="registerEmail" class="form-control mb-4" placeholder="Email" required>
								<label for="registerUsername">Username</label>
								<input type="text" id="registerUsername" class="form-control mb-4" placeholder="Username" required>
								<label for="registerPassword">Password</label>
								<input type="password" id="registerPassword" class="form-control mb-4" placeholder="Password" required>
								<div class="d-flex justify-content-start">
									<div class="custom-control custom-checkbox">
										<input type="checkbox" class="custom-control-input" id="registerCreateBandPage">
										<label class="custom-control-label" for="registerCreateBandPage">Create a band page</label>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>
				<div class="alert alert-danger alert-dismissible fade" role="alert" id="registerAlert">
					<span id="registerAlertText"></span>
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-footer">
					<button type="button" id="register-btn" class="btn btn-primary">Register</button>
					<button type="button" class="btn btn-primary btn-empty" data-dismiss="modal">Cancel</button>
				</div>
			</div>
		</div>
	</div>

	<div class="container">
		<div class="card" id="first-card">
			<div class="card-body">
				<div class="row text-center justify-content-center">
					<% var image = band.imageComponent.image; %>
					<img class="img-fluid" id="band-img" src="data:image/png;base64,<%= image %>"/>
				</div>
				<div class="row text-center mt-3">
					<div class="col-12">
						<h1 id="band-name"><%= band.bandInfo.name %></h1>
					</div>
				</div>
				<div class="row text-center">
					<div class="col-12">
						<h5 class="primary-highlight"><span id="follower-count"></span>&nbsp;Followers</h5>
					</div>
				</div>
				<div class="row justify-content-center">
					<button type="button" class="btn btn-primary btn-empty"><i class="fas fa-heart"></i>&nbsp;Follow</button>
				</div>
				<div class="card mt-2">
					<div class="card-body">
						<div class="row text-center">
							<% band.socialComponents.forEach(function(socialComponent) { %>
								<div class="col-3">
									<% var type = 'fa-' + socialComponent.type.toLowerCase(); %>
									<% var classes = 'social-icon fab ' + type; %>
									<a href="<%= socialComponent.link %>" target="_blank" class="<%= classes %>"></a>
								</div>
							<% }); %>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="mt-3">
			<div class="embed-responsive embed-responsive-16by9">
				<iframe class="embed-responsive-item" src="<%= band.youtubeComponent.link %>?rel=0&playsinline=1" allowfullscreen></iframe>
			</div>
		</div>
		<div class="card mt-3">
			<div class="card-body">
				<h1 class="card-title">Shows</h1>
				<div class="row justify-content-center text-center">
					<div class="col-12">
						<a class="bit-widget-initializer" data-artist-name="<%= band.bandInfo.name %>" data-display-local-dates="false" data-display-past-dates="true" data-auto-style="false" data-text-color="black" data-link-color="#1E90FF" data-popup-background-color="white" data-background-color="white" data-display-limit="15" data-link-text-color="#FFFFFF"></a>
					</div>
				</div>
			</div>
		</div>
		<div class="card mt-3 mb-5">
			<div class="card-body">
				<h1 class="card-title">About</h1>
				<hr/>
				<pre id="band-description"><%= band.aboutComponent.description %></pre>
			</div>
		</div>
	</div>

	<input id="band-username" value="<%= band.bandInfo.username %>" hidden />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.5.4/js/mdb.min.js"></script>
	<script charset="utf-8" src="https://widget.bandsintown.com/main.min.js"></script>
	<script src="/javascripts/band-followers.js"></script>
	<script src="/javascripts/user-handler.js"></script>
</body>
</html>